{"ast":null,"code":"var _jsxFileName = \"/home/deepanshu/Documents/trio-calls/client/src/pages/auth/SignUp.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"core/hooks/redux\";\nimport { updateAuth } from \"core/reducers/auth\";\nimport { signUp } from \"@arpitbhalla/trio-calls/utils/auth.fetch\";\nimport { useSnackbar } from \"notistack\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport VerifiedUserOutlined from \"@material-ui/icons/PersonOutlineOutlined\";\nimport EmailIcon from \"@material-ui/icons/EmailOutlined\";\nimport PasswordIcon from \"@material-ui/icons/LockOpen\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Logo from \"@arpitbhalla/trio-calls/components/Logo\";\nimport ShadowBox from \"@arpitbhalla/trio-calls/components/ShadowBox\";\nimport { useLocalStorage } from \"core/hooks/common\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INITIAL_STATE = {\n  text: \"\",\n  error: \"\"\n};\nconst useStyles = makeStyles(theme => ({\n  formField: {\n    paddingBottom: theme.spacing(1)\n  }\n}));\nexport const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst SignUp = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const setUID = useLocalStorage(\"UID\", \"\")[1];\n  const {\n    search\n  } = useLocation();\n  const {\n    isAuth\n  } = useAppSelector(_ref => {\n    let {\n      authReducer\n    } = _ref;\n    return authReducer;\n  });\n  const redirect_url = new URLSearchParams(search).get(\"redirect_url\") || \"/\";\n  const [name, setName] = React.useState(INITIAL_STATE);\n  const [email, setEmail] = React.useState(INITIAL_STATE);\n  const [password, setPassword] = React.useState(INITIAL_STATE);\n  const [loading, setLoading] = React.useState(false);\n\n  const handleSignUp = async () => {\n    const inValid = [[name.text, setName, /(\\w+)/], [email.text, setEmail, emailRegex], [password.text, setPassword, /(\\w+)/]].filter(elem => !elem[0] || !elem[2].test(elem[0]));\n\n    if (inValid.length) {\n      inValid.map(_ref2 => {\n        let [text, setState] = _ref2;\n        return setState({\n          text,\n          error: \"Field is invalid\"\n        });\n      });\n      return;\n    }\n\n    setLoading(true);\n    await signUp(name.text, email.text, password.text).then(userDetails => {\n      dispatch(updateAuth({\n        isAuth: true,\n        ...userDetails\n      }));\n      enqueueSnackbar(\"Welcome \" + userDetails.displayName);\n      setUID(JSON.stringify(userDetails));\n    }).catch(error => {\n      setLoading(false);\n      enqueueSnackbar(error || \"Something went wrong\", {\n        variant: \"error\"\n      });\n    });\n  };\n\n  const redirectToSignIn = () => {\n    history.push(\"/auth/signIn?redirect_url=\" + redirect_url);\n  };\n\n  React.useEffect(() => {\n    if (isAuth) {\n      history.push(redirect_url);\n    }\n  }, [isAuth, redirect_url, history]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(ShadowBox, {\n      p: 4,\n      py: 3,\n      mt: 8,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        align: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Logo, {\n          size: 12\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        align: \"center\",\n        color: \"primary\",\n        children: \"Create your team account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        py: 2,\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          error: !!name.error,\n          fullWidth: true,\n          className: classes.formField,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            placeholder: \"Display Name\",\n            variant: \"outlined\",\n            error: !!name.error,\n            value: name.text,\n            onChange: e => {\n              setName({\n                error: \"\",\n                text: e.target.value\n              });\n            },\n            autoFocus: true,\n            type: \"name\",\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(VerifiedUserOutlined, {\n                  color: !name.error ? \"action\" : \"error\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n            children: name.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          error: !!email.error,\n          fullWidth: true,\n          className: classes.formField,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            placeholder: \"Email\",\n            variant: \"outlined\",\n            error: !!email.error,\n            value: email.text,\n            onChange: e => {\n              setEmail({\n                error: \"\",\n                text: e.target.value\n              });\n            },\n            autoFocus: true,\n            type: \"email\",\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(EmailIcon, {\n                  color: !email.error ? \"action\" : \"error\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n            children: email.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          error: !!password.error,\n          fullWidth: true,\n          className: classes.formField,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            placeholder: \"Password\",\n            variant: \"outlined\",\n            type: \"password\",\n            error: Boolean(password.error),\n            onChange: e => {\n              setPassword({\n                error: \"\",\n                text: e.target.value\n              });\n            },\n            value: password.text,\n            onKeyDown: e => {\n              if (e.key === \"Enter\") handleSignUp();\n            },\n            autoFocus: true,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(PasswordIcon, {\n                  color: !password.error ? \"action\" : \"error\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n            children: password.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        size: \"large\",\n        color: \"primary\",\n        variant: \"contained\",\n        disabled: loading,\n        onClick: handleSignUp,\n        children: \"Register Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"text\",\n        color: \"primary\",\n        fullWidth: true,\n        onClick: redirectToSignIn,\n        children: \"Already have an account? Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignUp, \"h2277KFlG2srEwvAUkbBvgT7gWo=\", false, function () {\n  return [useStyles, useHistory, useAppDispatch, useSnackbar, useLocalStorage, useLocation, useAppSelector];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/home/deepanshu/Documents/trio-calls/client/src/pages/auth/SignUp.tsx"],"names":["React","makeStyles","useHistory","useLocation","useAppDispatch","useAppSelector","updateAuth","signUp","useSnackbar","Container","Box","FormControl","FormHelperText","TextField","InputAdornment","VerifiedUserOutlined","EmailIcon","PasswordIcon","Button","Typography","Logo","ShadowBox","useLocalStorage","INITIAL_STATE","text","error","useStyles","theme","formField","paddingBottom","spacing","emailRegex","SignUp","classes","history","dispatch","enqueueSnackbar","setUID","search","isAuth","authReducer","redirect_url","URLSearchParams","get","name","setName","useState","email","setEmail","password","setPassword","loading","setLoading","handleSignUp","inValid","filter","elem","test","length","map","setState","then","userDetails","displayName","JSON","stringify","catch","variant","redirectToSignIn","push","useEffect","e","target","value","startAdornment","Boolean","key"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"core/hooks/redux\";\nimport { updateAuth } from \"core/reducers/auth\";\nimport { signUp } from \"@arpitbhalla/trio-calls/utils/auth.fetch\";\nimport { useSnackbar } from \"notistack\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport VerifiedUserOutlined from \"@material-ui/icons/PersonOutlineOutlined\";\nimport EmailIcon from \"@material-ui/icons/EmailOutlined\";\nimport PasswordIcon from \"@material-ui/icons/LockOpen\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Logo from \"@arpitbhalla/trio-calls/components/Logo\";\nimport ShadowBox from \"@arpitbhalla/trio-calls/components/ShadowBox\";\nimport { useLocalStorage } from \"core/hooks/common\";\n\nconst INITIAL_STATE = { text: \"\", error: \"\" };\n\nconst useStyles = makeStyles((theme) => ({\n  formField: {\n    paddingBottom: theme.spacing(1),\n  },\n}));\nexport const emailRegex =\n  /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst SignUp: React.FC = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { enqueueSnackbar } = useSnackbar();\n  const setUID = useLocalStorage(\"UID\", \"\")[1];\n  const { search } = useLocation();\n  const { isAuth } = useAppSelector(({ authReducer }) => authReducer);\n  const redirect_url = new URLSearchParams(search).get(\"redirect_url\") || \"/\";\n  const [name, setName] = React.useState(INITIAL_STATE);\n  const [email, setEmail] = React.useState(INITIAL_STATE);\n  const [password, setPassword] = React.useState(INITIAL_STATE);\n  const [loading, setLoading] = React.useState(false);\n\n  const handleSignUp = async () => {\n    const inValid = (\n      [\n        [name.text, setName, /(\\w+)/],\n        [email.text, setEmail, emailRegex],\n        [password.text, setPassword, /(\\w+)/],\n      ] as [string, typeof setName, RegExp][]\n    ).filter((elem) => !elem[0] || !elem[2].test(elem[0]));\n\n    if (inValid.length) {\n      inValid.map(([text, setState]) =>\n        setState({ text, error: \"Field is invalid\" })\n      );\n      return;\n    }\n\n    setLoading(true);\n\n    await signUp(name.text, email.text, password.text)\n      .then((userDetails) => {\n        dispatch(updateAuth({ isAuth: true, ...userDetails }));\n        enqueueSnackbar(\"Welcome \" + userDetails.displayName);\n        setUID(JSON.stringify(userDetails));\n      })\n      .catch((error) => {\n        setLoading(false);\n        enqueueSnackbar(error || \"Something went wrong\", {\n          variant: \"error\",\n        });\n      });\n  };\n  const redirectToSignIn = () => {\n    history.push(\"/auth/signIn?redirect_url=\" + redirect_url);\n  };\n  React.useEffect(() => {\n    if (isAuth) {\n      history.push(redirect_url);\n    }\n  }, [isAuth, redirect_url, history]);\n\n  return (\n    <Container maxWidth=\"xs\">\n      <ShadowBox p={4} py={3} mt={8}>\n        <Typography align=\"center\">\n          <Logo size={12} />\n        </Typography>\n        <Typography variant=\"body1\" align=\"center\" color=\"primary\">\n          Create your team account\n        </Typography>\n        <Box py={2}>\n          <FormControl\n            error={!!name.error}\n            fullWidth\n            className={classes.formField}\n          >\n            <TextField\n              fullWidth\n              placeholder=\"Display Name\"\n              variant=\"outlined\"\n              error={!!name.error}\n              value={name.text}\n              onChange={(e) => {\n                setName({ error: \"\", text: e.target.value });\n              }}\n              autoFocus\n              type=\"name\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <VerifiedUserOutlined\n                      color={!name.error ? \"action\" : \"error\"}\n                    />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <FormHelperText>{name.error}</FormHelperText>\n          </FormControl>\n          <FormControl\n            error={!!email.error}\n            fullWidth\n            className={classes.formField}\n          >\n            <TextField\n              fullWidth\n              placeholder=\"Email\"\n              variant=\"outlined\"\n              error={!!email.error}\n              value={email.text}\n              onChange={(e) => {\n                setEmail({ error: \"\", text: e.target.value });\n              }}\n              autoFocus\n              type=\"email\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <EmailIcon color={!email.error ? \"action\" : \"error\"} />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <FormHelperText>{email.error}</FormHelperText>\n          </FormControl>\n          <FormControl\n            error={!!password.error}\n            fullWidth\n            className={classes.formField}\n          >\n            <TextField\n              placeholder=\"Password\"\n              variant=\"outlined\"\n              type=\"password\"\n              error={Boolean(password.error)}\n              onChange={(e) => {\n                setPassword({ error: \"\", text: e.target.value });\n              }}\n              value={password.text}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") handleSignUp();\n              }}\n              autoFocus\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <PasswordIcon\n                      color={!password.error ? \"action\" : \"error\"}\n                    />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <FormHelperText>{password.error}</FormHelperText>\n          </FormControl>\n        </Box>\n        <Button\n          fullWidth\n          size=\"large\"\n          color=\"primary\"\n          variant=\"contained\"\n          disabled={loading}\n          onClick={handleSignUp}\n        >\n          Register Now\n        </Button>\n        <Button\n          variant=\"text\"\n          color=\"primary\"\n          fullWidth\n          onClick={redirectToSignIn}\n        >\n          Already have an account? Sign in\n        </Button>\n      </ShadowBox>\n    </Container>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}